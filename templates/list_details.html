{% extends "base.html" %}

{% block content %}
<h1>Hello from listDetails!</h1>

<div class="mb-3">
    <a href="{{ url_for('image_routes.image_search', list_id=image_list.list_id) }}" class="btn btn-primary">Add Image</a>  <!-- Assuming the route to the 'add_image.html' page is 'add_image_route' -->
</div>

<button id="editFieldsButton" data-list-id="{{ list_id }}" class="btn btn-primary">Edit Fields</button>

<h2>{{ image_list.name }}</h2>

{% for image in images %}
    <div class="image-entry">
        <img src="{{ image.image_url }}" alt="{{ image.name }}">
        <p><strong>Name:</strong> {{ image.name }}</p> 
        

        <!-- Display custom fields -->
        {#{% if image.custom_fields %}
            {% for field, value in image.custom_fields.items() %}
                <p><strong>{{ field }}:</strong> {{ value }}</p>
            {% endfor %}
        {% endif %}
        #}

        <!-- Display the user-defined fields for this image -->
        {% for field in fields %}
            <div class="field-container">
                <strong>{{ field.name }}:</strong> 
                <!-- Note: This assumes each Image has attributes matching the field names. Adjust accordingly. -->
                {% if field.type == 'text' %}
                    <span>{{ image[field.name] }}</span> 
                {% elif field.type == 'number' %}
                    <span>{{ image[field.name] }}</span>
                {% endif %}
            </div>
        {% endfor %}

        <!-- Add/Edit Image Button -->
        {# <button onclick="location.href='{{ url_for('image_routes.edit_image', list_id=list_id, selected_image_url=image.image_url) }}'">Edit this Image?</button> #}
        <p>Image ID: {{ image.image_id }}</p>
        {# <button onclick="location.href='{{ url_for('image_routes.edit_image', list_id=list_id, image_id=image.id, selected_image_url=image.image_url) }}'">Edit this Image?</button> #}
        <button onclick="location.href='{{ url_for('image_routes.edit_image', list_id=list_id, image_id=image.image_id) }}?selected_image_url={{ image.image_url }}'">Edit this Image?</button>
 

    </div>
{% endfor %}

<script src="{{ url_for('static', filename='js/list_details.js') }}"></script>    
{% endblock %}







 